/* esm.sh - esbuild bundle(@blockamotolabs/react-bitmap-utils@0.0.1) es2022 production */
// The MIT License (MIT)
// Copyright (c) 2024 Blockamoto - https://github.com/blockamotolabs/
// LICENSE: /content/1d29d38edc8077746d4bbbcffb2eaccc0a4dc125bb35a754b8041f21145571b2i0
var _e="#181c1f",Me="#ffffff",Ne="#ff9500",Pe="#ff7e00";import X from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";import S from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var Ue=e=>e*(Math.PI/180),He=e=>e*(180/Math.PI),Le=(e,t)=>e/100*t,J=(e,t,r)=>t>r?Math.min(Math.max(e,r),t):Math.min(Math.max(e,t),r),We=(e,t,r,n,o,s)=>{let a=r-t,c=(o-n)/a,i=e-t,p=n+i*c;return s?J(p,n,o):p},T=(e,t,r,n)=>({width:typeof t=="number"?t*e:(n?.clientWidth??0)*e,height:typeof r=="number"?r*e:(n?.clientHeight??0)*e}),je=(e,t)=>{let r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}},$e=(e,t)=>{let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},Ke=e=>{let t=0,r=0,n=1/0;for(let o=1;o<e;o+=1){let s=e/o,a=Math.abs(o-s);!(s%1)&&a<n&&(n=a,t=o,r=s)}return t>r?t:r};import{createContext as Q}from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var v=Q(null);import{Children as Z}from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";import k from"/content/9b0338c4e84987a374845235a3b4f0fe73b205b336a7b936e05c71deb5a1882ci0";import{DefaultEventPriority as ee}from"/content/1f6fe4c156dcc779118b7ca454886feb194dd2a7dfc02cfb91ee3382bf62cd84i0";var l;(function(e){e.Rectangle="Canvas.Rectangle",e.Line="Canvas.Line",e.Text="Canvas.Text",e.Translate="Canvas.Translate",e.Scale="Canvas.Scale",e.Rotate="Canvas.Rotate",e.Opacity="Canvas.Opacity",e.Image="Canvas.Image",e.CanvasBuffer="Canvas.CanvasBuffer"})(l||(l={}));var h;(function(e){e.Root="Canvas.Internal.Root",e.Text="Canvas.Internal.Text"})(h||(h={}));var te={},re={},R=e=>Z.toArray(e).reduce((t,r)=>r&&typeof r=="object"?Symbol.iterator in r?[...t,...R(r)]:[...t,r,...R(r.props.children)]:[...t,r],[]),F=(e,t)=>{let r=Object.entries(e),n=Object.entries(t);if(r.length!==n.length)return!0;for(let o=0;o<n.length;o+=1){let s=n[o];if(!s)continue;let[a,f]=s;if(a!=="children"&&f!==e[a])return!0}},ne={[l.CanvasBuffer]:(e,t)=>{if(F(e,t))return!0;let r=R(e.children),n=R(t.children);if(r.length!==n.length)return!0;for(let o=0;o<n.length;o+=1){let s=r[o],a=n[o];if(typeof s!=typeof a||(typeof s!="object"||typeof a!="object")&&s!==a||s&&typeof s=="object"&&a&&typeof a=="object"&&F(s.props,a.props))return!0}return!1}},D={supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!1,isPrimaryRenderer:!1,noTimeout:-1,getRootHostContext:()=>te,getChildHostContext:()=>re,prepareForCommit:()=>null,resetAfterCommit:()=>{},shouldSetTextContent:(e,t)=>typeof t.children=="string"||typeof t.children=="number",createInstance:(e,t,r,n)=>{let o=[];return D.shouldSetTextContent(e,t)&&o.push({type:h.Text,rendered:t.children.toString()}),{type:e,props:t,rendered:o,hasUpdates:!0}},createTextInstance:(e,t,r)=>({type:h.Text,rendered:e}),insertBefore:(e,t,r)=>{let n=e.rendered.indexOf(r);n>=0&&e.rendered.splice(n,0,t)},appendChildToContainer:(e,t)=>e.rendered.push(t),appendChild:(e,t)=>e.rendered.push(t),appendInitialChild:(e,t)=>e.rendered.push(t),finalizeInitialChildren:()=>!1,prepareUpdate:(e,t,r,n,o,s)=>{let a=ne[t];return a?a(r,n)?{hasUpdates:!0}:{hasUpdates:!1}:{hasUpdates:!0}},commitUpdate:(e,t,r,n,o)=>{e.props=o,e.hasUpdates=t.hasUpdates,D.shouldSetTextContent(r,o)&&(e.rendered=[{type:h.Text,rendered:o.children.toString()}])},commitTextUpdate:(e,t,r)=>{e.rendered=r},getPublicInstance:e=>e,preparePortalMount:()=>{},scheduleTimeout:globalThis.setTimeout,cancelTimeout:globalThis.clearTimeout,getCurrentEventPriority:()=>ee,getInstanceFromNode:()=>null,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},prepareScopeUpdate:()=>{},getInstanceFromScope:()=>null,detachDeletedInstance:()=>{},clearContainer:e=>{e.rendered=[]},removeChildFromContainer:(e,t)=>{let r=e.rendered.indexOf(t);r>=0&&e.rendered.splice(r,1)},removeChild:(e,t)=>{let r=e.rendered.indexOf(t);r>=0&&e.rendered.splice(r,1)}},E=k(D),oe={render:e=>{let t=E.createContainer({type:h.Root,rendered:[]},0,null,!1,!1,"Canvas",r=>{globalThis.console&&typeof globalThis.console.error=="function"&&console.error(r)},null);return E.updateContainer(e,t,null,()=>null),{container:t,update:r=>E.updateContainer(r,t,null,()=>null),unmount:()=>E.updateContainer(null,t,null)}}},U=oe;var se=/^on/,w=e=>e.replace(se,"").toLowerCase();var H=e=>Array.isArray(e),b=(e,t,r,n,o,s,a,f)=>{if(a.type!==h.Root&&!a.hasUpdates)return;e.width=r,e.height=n,s&&(t.fillStyle=s,t.fillRect(0,0,r,n)),t.scale(o,o);let c=i=>{if(typeof i=="string"||i.type===h.Text)return;let p=f[i.type];p&&(i.props?.restore&&t.save(),p.drawBeforeChildren?.({canvas:e,ctx:t,drawChild:c,width:e.width/o,height:e.height/o,pixelRatio:o},i),!p.handlesChildren&&H(i.rendered)&&i.rendered.forEach(c),p.drawAfterChildren?.({canvas:e,ctx:t,drawChild:c,width:e.width,height:e.height,pixelRatio:o},i),i.props?.restore&&t.restore(),a.type!==h.Root&&(a.hasUpdates=!1))};H(a.rendered)&&a.rendered.forEach(c)};var{useCallback:ae,useRef:ie}=S,L=(e,t,r,n,o,s,a,f)=>{let c=ie(null);a(()=>{if(!t){c.current?.unmount(),c.current=null;return}c.current?c.current.update(S.createElement(v.Provider,{value:e},s)):c.current=U.render(S.createElement(v.Provider,{value:e},s));let{container:{containerInfo:i}}=c.current,{canvas:p,ctx:d}=t;b(p,d,r.width,r.height,n,o,i,f)},[o,t,r.height,r.width,n,s,e,f])},I=(e,t,r,n,o,s,a)=>ae(f=>{e?.(()=>f?{canvas:f,ctx:f.getContext("2d")}:null);let c=T(a,o,s,f);t?.(c),r?.({width:c.width/a,height:c.height/a}),n&&(typeof n=="object"?n.current=f:typeof n=="function"&&n(f))},[s,r,a,n,e,t,o]);var le={drawBeforeChildren:({ctx:e},{props:{x:t,y:r,width:n,height:o,fill:s,stroke:a,strokeWidth:f=1}})=>{!s&&!a&&e.rect(t,r,n,o),s&&(e.fillStyle=s,e.fillRect(t,r,n,o)),a&&f&&(e.strokeStyle=a,e.lineWidth=f,e.strokeRect(t,r,n,o))}},fe={drawBeforeChildren:({ctx:e},{props:{startX:t,startY:r,endX:n,endY:o,stroke:s,strokeWidth:a=1,continuePath:f}})=>{f!==!1&&e.beginPath(),e.moveTo(t,r),e.lineTo(n,o),s&&a&&(e.strokeStyle=s,e.lineWidth=a,e.stroke())}},ce={drawBeforeChildren:({ctx:e},{props:{radians:t,restore:r},rendered:n})=>{n.length&&r!==!1&&e.save(),e.rotate(t)},drawAfterChildren:({ctx:e},{props:{restore:t},rendered:r})=>{r.length&&t!==!1&&e.restore()}},pe={drawBeforeChildren:({ctx:e},{props:{x:t=0,y:r=0,restore:n},rendered:o})=>{o.length&&n!==!1&&e.save(),e.translate(t,r)},drawAfterChildren:({ctx:e},{props:{restore:t},rendered:r})=>{r.length&&t!==!1&&e.restore()}},de={drawBeforeChildren:({ctx:e},{props:{x:t=1,y:r=1,restore:n},rendered:o})=>{o.length&&n!==!1&&e.save(),e.scale(t,r)},drawAfterChildren:({ctx:e},{props:{restore:t},rendered:r})=>{r.length&&t!==!1&&e.restore()}},W=e=>typeof e=="string"?e:e.map(t=>t.type===h.Text?t.rendered:"").join(""),ue={drawBeforeChildren:({ctx:e},{props:{x:t,y:r,fontFamily:n="arial",fontSize:o=12,fontStyle:s="normal",fontVariant:a="normal",fontWeight:f="normal",textAlign:c="left",verticalAlign:i="top",fill:p,stroke:d,strokeWidth:u=1},rendered:m})=>{i&&(e.textBaseline=i),c&&(e.textAlign=c);let C=`${s} ${a} ${f} ${o}px ${n}`;e.font=C,p&&(e.fillStyle=p,e.fillText(W(m),t,r)),d&&u&&(e.strokeStyle=d,e.lineWidth=u,e.strokeText(W(m),t,r))}},me={drawBeforeChildren:({ctx:e},{props:{opacity:t=1,restore:r},rendered:n})=>{n.length&&r!==!1&&e.save(),e.globalAlpha=t},drawAfterChildren:({ctx:e},{props:{restore:t},rendered:r})=>{r.length&&t!==!1&&e.restore()}},he={drawBeforeChildren:({ctx:e},{props:{x:t,y:r,width:n,height:o,src:s}})=>{e.drawImage(s,t,r,n,o)}},Ce={handlesChildren:!0,drawBeforeChildren:({ctx:e},t)=>{let{props:{width:r,height:n,drawX:o,drawY:s,drawWidth:a,drawHeight:f,backgroundColor:c,pixelRatio:i,canvas:p,ctx:d,renderers:u},hasUpdates:m}=t,C={width:r*i,height:n*i};m&&b(p,d,C.width,C.height,i,c,t,u),e.drawImage(p,o,s,a,f)}},j={[l.Rectangle]:le,[l.Line]:fe,[l.Rotate]:ce,[l.Translate]:pe,[l.Scale]:de,[l.Text]:ue,[l.Opacity]:me,[l.Image]:he,[l.CanvasBuffer]:Ce};var{forwardRef:ge,memo:xe,useEffect:$,useMemo:K,useState:q}=X,ve=xe(ge(({width:e,height:t,pixelRatio:r=1,onResize:n,backgroundColor:o,children:s,renderers:a,...f},c)=>{let[i,p]=q(null),[d,u]=q(T(r,e,t,i?.canvas)),m=K(()=>({...j,...a}),[a]),C=K(()=>i?{...i,width:d.width,height:d.height,pixelRatio:r,renderers:m,parent:null}:{canvas:null,ctx:null,width:d.width,height:d.height,pixelRatio:r,renderers:m,parent:null},[i,d.height,d.width,r,m]);L(C,i,d,r,o,s,$,m),$(()=>{if(!i)return;let y=new ResizeObserver(()=>{let x=T(r,e,t,i.canvas);u({width:x.width,height:x.height}),n?.({width:x.width/r,height:x.height/r})});return y.observe(i.canvas),()=>{y.disconnect()}},[i,t,n,r,e]);let g=I(p,u,n,c,e,t,r);return X.createElement("canvas",{width:d.width,height:d.height,...f,ref:g})}));ve.displayName="Canvas";import Te from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var{useContext:we,useEffect:B,useState:Y}=Te,ye=/android/i,xt=()=>ye.test(globalThis.navigator.userAgent)?1:globalThis.devicePixelRatio>=2?2:1,Ee=(e=60)=>{let[t,r]=Y([]);return B(()=>{let n=globalThis.requestAnimationFrame(()=>{let o=Date.now();r(s=>(s.unshift(o),s.slice(0,e)))});return()=>{globalThis.cancelAnimationFrame(n)}},[e,t]),t},vt=(e=60)=>{let t=Ee(e),r=t.reduce((n,o,s,a)=>{let f=a[s+1];return typeof f!="number"?n:n+(o-f)},0);return r?1e3/(r/(t.length||1)):0},Tt=()=>{let[e,t]=Y({last:Date.now(),delta:0});return B(()=>{let r=globalThis.requestAnimationFrame(()=>{let n=Date.now();t(({last:o})=>({last:n,delta:n-o}))});return()=>{globalThis.cancelAnimationFrame(r)}},[e]),e.delta},G=/(Up|End|Cancel)$/,wt=(e,t)=>{B(()=>(t&&Object.entries(e).forEach(([r,n])=>{n&&(G.test(r)?globalThis.window.addEventListener(w(r),n,{passive:!1}):t.addEventListener(w(r),n,{passive:!1}))}),()=>{t&&Object.entries(e).forEach(([r,n])=>{n&&(G.test(r)?globalThis.window.removeEventListener(w(r),n):t.removeEventListener(w(r),n))})}),[t,e])},V=()=>{let e=we(v);if(!e)throw new Error("Attempted to access CanvasContext outside of a Canvas");return e};var Rt=l.Rectangle;var At=l.Line;var Bt=l.Text;var Mt=l.Image;import O from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var{forwardRef:Re,memo:be,useEffect:Ie,useMemo:A}=O,Ae=be(Re(({pixelRatio:e,width:t,height:r,onResize:n,backgroundColor:o,children:s,renderers:a,...f},c)=>{let i=V(),p=t??i?.width,d=r??i?.height,u=e??i?.pixelRatio??1,m=A(()=>({width:p*u,height:d*u}),[d,p,u]),C=A(()=>({...i.renderers,...a}),[i.renderers,a]),g=A(()=>{let P=globalThis.document.createElement("canvas"),z=P.getContext("2d");return{canvas:P,ctx:z}},[]),y=A(()=>({...g,width:m.width,height:m.height,pixelRatio:u,parent:i,renderers:C}),[g,m.height,m.width,i,u,C]),x=I(void 0,void 0,n,c,t,r,u);return Ie(()=>(x(g.canvas),()=>{x(null)}),[g.canvas,x]),O.createElement(v.Provider,{value:y},O.createElement(l.CanvasBuffer,{...f,width:p,height:d,pixelRatio:u,backgroundColor:o,canvas:g.canvas,ctx:g.ctx,renderers:C},s))}));Ae.displayName="CanvasBuffer";var $t=l.Translate;var Xt=l.Scale;var Vt=l.Rotate;var Qt=l.Opacity;import _ from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var{memo:De}=_,Se=De(({start:e=0,step:t=1,end:r,children:n})=>{let o=[];for(let s=e;s<r;s+=t)o.push(n({index:s,start:e,step:t,end:r}));return _.createElement(_.Fragment,null,o)});Se.displayName="For";import N from"/content/7f403153b6484f7d24f50a51e1cdf8187219a3baf103ef0df5ea2437fb9de874i0";var{memo:Be}=N,M=1e6,Oe=Be(({context:e,test:t,children:r})=>{let n=[],o=0;for(;o<=M&&t(e);)o+=1,n.push(r(e));return o>M&&t(e)&&globalThis.console&&typeof globalThis.console.warn=="function"&&console.warn(`Maximum loop count exceeded. Only rendering last ${M} elements.`),N.createElement(N.Fragment,null,n)});Oe.displayName="While";export{_e as BLACK,ve as Canvas,Ae as CanvasBuffer,l as CanvasElementType,Se as For,Mt as Image,h as InternalCanvasElementType,At as Line,Ne as ORANGE,Pe as ORANGE_DARK,Qt as Opacity,Rt as Rectangle,Vt as Rotate,Xt as Scale,Bt as Text,$t as Translate,Me as WHITE,Oe as While,J as clamp,Ue as degreesToRadians,T as getDimensions,$e as getDistance,je as getLocationWithinElement,Le as percentageOf,He as radiansToDegrees,We as remapValue,Ke as roundSquareRoot,vt as useAverageFrameRate,V as useCanvasContext,Tt as useDelta,wt as useEventHandlers,Ee as useFrameTimes,xt as useRecommendedPixelRatio};
